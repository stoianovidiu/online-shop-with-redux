{"version":3,"sources":["../node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","containers/Product/Product.js","axios-instance.js","hooks/http-error-handler.js","hoc/withErrorHandler/withErrorHandler.js","components/Header/Header.js","components/Header/Header.module.css","components/ConfirmMessage/ActionDoneMessage/ActionDoneMessage.js","components/ConfirmMessage/ActionDoneMessage/ActionDoneMessage.module.css","containers/Product/Product.module.css"],"names":["_toConsumableArray","arr","Array","isArray","arrayLikeToArray","iter","Symbol","iterator","Object","from","unsupportedIterableToArray","TypeError","EditProduct","React","lazy","withErrorHandler","props","useState","product","setProduct","isEditing","setIsEditing","wasEdited","setWasEdited","isConfirming","setIsConfirming","isDone","setIsDone","isLoading","setIsLoading","history","useHistory","useEffect","axios","get","match","params","id","then","resp","status","data","catch","err","cancelMessage","roles","includes","replace","confirmMessage","ConfirmMessage","action","prodName","name","clicked1","clicked2","delete","ActionDoneMessage","message","clicked","Spinner","modeDisplay","Header","title","paramsId","btn1","updatedProduct","quantity","cart","slice","foundProduct","find","prod","setCart","filter","btn2","className","classes","Product","ProdList","category","price","description","src","image","alt","currProd","Modal","show","modalClosed","instance","create","baseURL","HttpErrorHandlerHook","httpClient","error","setError","reqInterceptor","interceptors","request","use","req","respInterceptor","response","eject","WrappedComponent","httpErrorHandlerHook","clearError","location","useLocation","buttons","keys","length","pathname","module","exports","actionDoneMessage"],"mappings":"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","file":"static/js/5.2f716e32.chunk.js","sourcesContent":["import arrayWithoutHoles from \"@babel/runtime/helpers/esm/arrayWithoutHoles\";\nimport iterableToArray from \"@babel/runtime/helpers/esm/iterableToArray\";\nimport unsupportedIterableToArray from \"@babel/runtime/helpers/esm/unsupportedIterableToArray\";\nimport nonIterableSpread from \"@babel/runtime/helpers/esm/nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","import arrayLikeToArray from \"@babel/runtime/helpers/esm/arrayLikeToArray\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import React, { useState, useEffect, Fragment } from \"react\";\r\nimport { useHistory } from \"react-router\";\r\n\r\nimport Header from \"../../components/Header/Header\";\r\nimport Modal from \"../../components/UI/Modal/Modal\";\r\nimport Spinner from \"../../components/UI/Spinner/Spinner\";\r\nimport ConfirmMessage from \"../../components/ConfirmMessage/ConfirmMessage\";\r\nimport ActionDoneMessage from \"../../components/ConfirmMessage/ActionDoneMessage/ActionDoneMessage\";\r\nimport classes from \"./Product.module.css\";\r\nimport axios from \"../../axios-instance\";\r\nimport withErrorHandler from \"../../hoc/withErrorHandler/withErrorHandler\";\r\n\r\nconst EditProduct = React.lazy(() => import(\"../EditProduct/EditProduct\"));\r\n\r\nconst Product = (props) => {\r\n  const [product, setProduct] = useState({});\r\n  const [isEditing, setIsEditing] = useState(false);\r\n  const [wasEdited, setWasEdited] = useState(true);\r\n  const [isConfirming, setIsConfirming] = useState(false);\r\n  const [isDone, setIsDone] = useState(false);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  const history = useHistory();\r\n\r\n  useEffect(() => {\r\n    if (wasEdited) {\r\n      setIsLoading(true);\r\n      axios\r\n        .get(`/products/${props.match.params.id}`)\r\n        .then((resp) => {\r\n          if (resp.status >= 200 && resp.status < 300) {\r\n            setIsLoading(false);\r\n            setWasEdited(false);\r\n            setProduct(resp.data);\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          setIsLoading(false);\r\n        });\r\n    }\r\n  }, [props.match.params.id, wasEdited]);\r\n\r\n  const addToCartButtonHandler = () => {\r\n    const updatedProduct = { ...product, quantity: 1 };\r\n    const cart = props.cart.slice();\r\n    const foundProduct = cart.find((prod) => prod.id === updatedProduct.id);\r\n\r\n    props.setCart(\r\n      foundProduct\r\n        ? [\r\n            ...cart.filter((prod) => prod.id !== updatedProduct.id),\r\n            { ...foundProduct, quantity: foundProduct.quantity + 1 },\r\n          ]\r\n        : [...cart, updatedProduct]\r\n    );\r\n\r\n    setIsDone(true);\r\n  };\r\n\r\n  const deleteProductHandler = () => {\r\n    setIsLoading(true);\r\n    axios\r\n      .delete(`/products/${props.match.params.id}`)\r\n      .then((resp) => {\r\n        if (resp.status >= 200 && resp.status < 300) {\r\n          setIsLoading(false);\r\n          setIsConfirming(false);\r\n          setIsDone(true);\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        setIsLoading(false);\r\n      });\r\n  };\r\n\r\n  const editProductHandler = () => {\r\n    setWasEdited(false);\r\n    setIsEditing(true);\r\n  };\r\n\r\n  const openMessage = () => {\r\n    setIsConfirming(true);\r\n  };\r\n\r\n  const cancelMessage = () => {\r\n    if (isConfirming) {\r\n      setIsConfirming(false);\r\n    } else if (isDone) {\r\n      setIsDone(false);\r\n      if (props.roles.includes(\"admin\")) {\r\n        history.replace(\"/products\");\r\n      }\r\n    }\r\n  };\r\n\r\n  let confirmMessage = null;\r\n\r\n  if (isConfirming) {\r\n    confirmMessage = (\r\n      <ConfirmMessage\r\n        action=\"delete\"\r\n        prodName={product.name}\r\n        clicked1={cancelMessage}\r\n        clicked2={deleteProductHandler}\r\n      />\r\n    );\r\n  } else if (isDone) {\r\n    confirmMessage = (\r\n      <ActionDoneMessage\r\n        message={\r\n          props.roles.includes(\"admin\")\r\n            ? `The product \"${product.name}\" has been successfully deleted!`\r\n            : `The product \"${product.name}\" was added to the shopping cart!`\r\n        }\r\n        clicked={cancelMessage}\r\n      />\r\n    );\r\n  }\r\n\r\n  if (isLoading && !isEditing) {\r\n    confirmMessage = <Spinner />;\r\n  }\r\n\r\n  let modeDisplay = (\r\n    <Fragment>\r\n      <Header\r\n        title={\"Product: \" + product.name}\r\n        paramsId={props.match.params}\r\n        roles={props.roles}\r\n        btn1={props.roles.includes(\"admin\") ? \"EDIT\" : \"ADD TO CART\"}\r\n        clicked1={\r\n          props.roles.includes(\"admin\")\r\n            ? editProductHandler\r\n            : addToCartButtonHandler\r\n        }\r\n        btn2=\"DELETE\"\r\n        clicked2={openMessage}\r\n      />\r\n      <div className={classes.Product}>\r\n        <div className={classes.ProdList}>\r\n          <p>\r\n            <span>Name:</span> {product.name}\r\n          </p>\r\n          <p>\r\n            <span>Category:</span> {product.category}\r\n          </p>\r\n          <p>\r\n            <span>Price:</span> {product.price} EUR\r\n          </p>\r\n          <p>\r\n            <span>Description:</span> {product.description}\r\n          </p>\r\n        </div>\r\n        <img src={product.image} alt={product.name + \"img\"} />\r\n      </div>\r\n    </Fragment>\r\n  );\r\n\r\n  if (isLoading && wasEdited) {\r\n    modeDisplay = <Spinner />;\r\n  }\r\n\r\n  if (isEditing) {\r\n    modeDisplay = (\r\n      <div className={classes.Product}>\r\n        <EditProduct\r\n          product={product}\r\n          currProd={props.match.params.id}\r\n          setIsEditing={setIsEditing}\r\n          setWasEdited={setWasEdited}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Fragment>\r\n      <Modal show={isDone || isConfirming} modalClosed={cancelMessage}>\r\n        {confirmMessage}\r\n      </Modal>\r\n      {modeDisplay}\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nexport default withErrorHandler(Product, axios);\r\n","import axios from \"axios\";\r\n\r\nconst instance = axios.create({\r\n  baseURL: \"http://localhost:4000/\",\r\n});\r\n\r\nexport default instance;\r\n","import { useState, useEffect } from \"react\";\r\n\r\nconst HttpErrorHandlerHook = (httpClient) => {\r\n  const [error, setError] = useState(null);\r\n\r\n  const reqInterceptor = httpClient.interceptors.request.use((req) => {\r\n    setError(null);\r\n    return req;\r\n  });\r\n\r\n  const respInterceptor = httpClient.interceptors.response.use(\r\n    (resp) => resp,\r\n    (err) => {\r\n      setError(err);\r\n    }\r\n  );\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      httpClient.interceptors.request.eject(reqInterceptor);\r\n      httpClient.interceptors.response.eject(respInterceptor);\r\n    };\r\n  }, [\r\n    reqInterceptor,\r\n    respInterceptor,\r\n    httpClient.interceptors.request,\r\n    httpClient.interceptors.response,\r\n  ]);\r\n\r\n  const errorConfirmedHandler = () => {\r\n    setError(null);\r\n  };\r\n\r\n  return [error, errorConfirmedHandler];\r\n};\r\n\r\nexport default HttpErrorHandlerHook;\r\n","import React, { Fragment } from \"react\";\r\n\r\nimport Modal from \"../../components/UI/Modal/Modal\";\r\nimport httpErrorHandlerHook from \"../../hooks/http-error-handler\";\r\n\r\nconst withErrorHandler = (WrappedComponent, axios) => {\r\n  return (props) => {\r\n    const [error, clearError] = httpErrorHandlerHook(axios);\r\n    return (\r\n      <Fragment>\r\n        <Modal show={error} modalClosed={clearError}>\r\n          {error ? error.message : null}\r\n        </Modal>\r\n        <WrappedComponent {...props} />\r\n      </Fragment>\r\n    );\r\n  };\r\n};\r\n\r\nexport default withErrorHandler;\r\n","import React from \"react\";\r\n\r\nimport classes from \"./Header.module.css\";\r\nimport Button from \"../UI/Button/Button\";\r\nimport { useLocation } from \"react-router\";\r\n\r\nconst Header = (props) => {\r\n  const location = useLocation();\r\n  let buttons = (\r\n    <div>\r\n      <Button clicked={props.clicked1}>{props.btn1}</Button>\r\n      <Button clicked={props.clicked2}>{props.btn2}</Button>\r\n    </div>\r\n  );\r\n\r\n  if (\r\n    Object.keys(props.paramsId).length === 0 ||\r\n    !props.roles.includes(\"admin\")\r\n  ) {\r\n    buttons = <Button clicked={props.clicked1}>{props.btn1}</Button>;\r\n  }\r\n\r\n  if (\r\n    location.pathname === \"/sales\" ||\r\n    (location.pathname === \"/products\" && !props.roles.includes(\"admin\"))\r\n  ) {\r\n    buttons = null;\r\n  }\r\n\r\n  return (\r\n    <div className={classes.Header}>\r\n      <h2>{props.title}</h2>\r\n      {buttons}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Header;\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Header\":\"Header_Header__17NkT\"};","import React from \"react\";\r\n\r\nimport Button from \"../../UI/Button/Button\";\r\nimport classes from \"./ActionDoneMessage.module.css\";\r\n\r\nconst actionDoneMessage = (props) => {\r\n  return (\r\n    <div className={classes.ActionDoneMessage}>\r\n      <p>{props.message}</p>\r\n      <Button clicked={props.clicked}>OK</Button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default actionDoneMessage;\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ActionDoneMessage\":\"ActionDoneMessage_ActionDoneMessage__3ysrl\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Product\":\"Product_Product__2ByQI\",\"ProdList\":\"Product_ProdList__xCU8g\"};"],"sourceRoot":""}